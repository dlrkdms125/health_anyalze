# 심전도와 호흡계측을 이용한 생체신호 모니터링 시스템 개발

### 프로젝트 배경
> 심혈관 질환은 전 세계적으로 주요한 사망 원인 중 하나이다. 이러한 심혈관 질환은 단순 노령 환자가 아닌 젊은 층의 경우에도 나타나며 심각한 결과를 초래한다. 건강보험심사평가원의 최근 5년간(2018년~2022년) 심장질환 진료현황 분석결과를 살펴보면, 심장질환환자 수는 2018년 152만 9537명 대비 2022년 183만 3320명으로 19.9% 증가해 연평균 4.6%를 보였는데, 이때 심장질환자 비율은 80대가 가장 높았고, 70대 60대 순으로 고령층이 30% 이상을 차지했다. 그러나 심장질환자 비율이 고령층에서 높은 것과 달리 심장질환자 증가세는 10대부터 30대까지가 가장 가파른 추세를 보였다.

### 프로젝트 목적
> 이처럼 다른 질병과 달리 한번 발생 시 심혈관 질환은 바로 사망사고로 이어질 수 있고 이미 생긴 경화증상을 완치 할 수 있는 치료 방법은 따로 없다. 따라서 심혈관 질환은 치료보다는 지속적으로 모니터링해서 질병을 미리 예방하는 것이 가장 중요하다고 볼 수 있다. </br>

### 심전도 검사의 측정 방법
> 심장초음파검사, 관상동맥 조영술, 심장전산화단층 촬영(CT) 등으로 심장의 전기적인 활동 패턴을 분석함으로써 다양한 심혈관 질환을 진단하고 평가할 수 있다. 주형 파들로는 P파ㅡ QRS 복합체, T파, 그리고 PR 간격 등이 있다. 이러한 파형들은 심전도 검사를 통해 심장의 전 전기 활동을 분석하고, 심장 기능과 이상 리듬을 평가하는데 사용된다.  <br>
### 호흡 검사의 측정 방법
> 호흡 임피던스 검사는 전극이 부착된 벨트나 패드를 사용하여 가슴과 배에 부착되며, 호흡 과정에서 발생하는 전기적인 변화를 감지하여 호흡 용량과 패턴을 측정하고 분석한다. 이를 통해 호흡 관련 문제를 식별하고 폐기능을 평가할 수 있다. 또한, 호흡 임피던스 검사는 호흡 패턴을 분석하여 이상한 호흡 패턴이나 호흡 어려움을 식별하는데에도 활용된다. <br>

### 📌 시스템 설계 및 구현
<img width="686" alt="스크린샷 2025-02-07 오후 7 40 17" src="https://github.com/user-attachments/assets/25b6c802-3588-40bf-ba3b-4b2798a962ec" />

<br>

### 🚦 ECG 신호 계측 시스템
<img width="620" alt="스크린샷 2025-02-07 오후 7 42 28" src="https://github.com/user-attachments/assets/033e394f-4d47-40ba-84a9-6ceafbc0ad2a" /> </br>
ECG 신호 획득 아날로그 회로이다
ECG 신호로는 크게 AC커플링, 영점조절회로,IA(Instrumentation Amplifier), Pre-Amplifier, Post-Amplifier, 저역통과 필터, 고역 통과 필터로 구성하였따. 
IA는 AD620을 사용하였고, 각 Opmap는 저잡음 고정밀 연산증폭기인 OP07이다.

<br>


### 호흡 신호 계측 시스템
<img width="501" alt="스크린샷 2025-02-07 오후 7 47 14" src="https://github.com/user-attachments/assets/94df2ef9-e526-4e14-8eb9-36871b5f37e5" />
<img width="481" alt="스크린샷 2025-02-07 오후 7 49 17" src="https://github.com/user-attachments/assets/9b7bfaf4-da18-4bc0-9815-948005908d00" />

전력은 양방향 전원으로 구성하였으며 9v 전지 두개를 사용해 +9, -9V를 인가하였다. 사인파 발생을 위해 wein brige 발진기를 구성해 10khz의 양방향 사인파를 생성하였다. opamp를 이용해서 증폭기로 발진을 생성하고 출력 신호를 저항-커패시터를 통해 피드백을 시켜 주파수 진폭을 안정화하였다. 이후 정전류 회로의 저항을 이용하여 일정한 전류를 유지하여 전류를 평탄화시켰다. 2전극 방식을 이용해서 생체 신호를 계측했으며 이 신호를 ad620 계측 증폭기를 이용하여 신호를 증폭시켰다. 

<br>
❗️입력저항의 경우 처음에는 k단위를 썼으나 피부저항의 변화 크기가 매우 작아 100옴의 저항을 써서 출력신호의 변화차이를 나타나게 구성하였다. 이 신호는 정류기 회로로 보내져 다이오드랑 커패시터를 이용히여 DC신호로 변환하였다. 정류기 회로 말고도 신호가 잘 발생했는지를 비교 분석하기 위해 적분회로를 이용하여 하나의 신호를 더 발생시켰다.


### ECG 신호 검출
아날로그 입력 핀 A0에서 값을 읽어와서 해당 값을 전압으로 변환하고, 변환된 전압이 2V 이하인지를 확인하여 시리얼 모니터에 출력하는 아두이노 코드






